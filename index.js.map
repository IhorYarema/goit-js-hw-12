{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49237472-e2704486942ee192f1a430e77';\nconst BASE_URL = 'https://pixabay.com/api/';\n\naxios({\n  method: 'get',\n  url: 'https://jsonplaceholder.typicode.com/users',\n});\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const { data } = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: perPage,\n      },\n    });\n    return {\n      images: data.hits,\n      totalHits: data.totalHits,\n    };\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    return { images: [], totalHits: 0 };\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet lightbox = new SimpleLightbox('.gallery a');\n\nexport function renderGallery(images, isNewQuery = false) {\n  if (isNewQuery) {\n    gallery.innerHTML = '';\n  }\n\n  if (images.length === 0) {\n    showErrorMessage(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n    return;\n  }\n\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n            <li>\n                <a href=\"${largeImageURL}\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n                </a>\n                <div><p>Likes: <span>${likes}</span></p> <p> Views: <span>${views}</span></p> <p> Comments: <span>${comments}</span></p> <p> Downloads: <span>${downloads}</span></p></div>\n            </li>\n        `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n  loadMoreBtn.classList.add('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n  loadMoreBtn.classList.remove('hidden');\n}\n\nexport function showErrorMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n  });\n}\n\nexport function toggleLoadMoreBtn(show) {\n  if (show) {\n    loadMoreBtn.classList.remove('hidden');\n  } else {\n    loadMoreBtn.classList.add('hidden');\n  }\n}\n\nexport function showEndOfCollectionMessage() {\n  iziToast.info({\n    title: 'End of Results',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n  });\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderGallery,\n  showLoader,\n  hideLoader,\n  showErrorMessage,\n  toggleLoadMoreBtn,\n  showEndOfCollectionMessage,\n} from './js/render-functions.js';\n\nconst form = document.getElementById('search-form');\nconst input = document.getElementById('search-input');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet query = '';\nlet page = 1;\nconst perPage = 15;\nlet totalHits = 0;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  query = input.value.trim();\n  if (!query) {\n    showErrorMessage('Please enter a search term!');\n    return;\n  }\n  page = 1;\n  toggleLoadMoreBtn(false); // Передаємо кнопку\n  showLoader();\n\n  try {\n    const { images, totalHits: fetchedTotalHits } = await fetchImages(\n      query,\n      page,\n      perPage\n    );\n    totalHits = fetchedTotalHits;\n\n    renderGallery(images, true);\n    hideLoader();\n\n    if (images.length < perPage || totalHits <= perPage) {\n      toggleLoadMoreBtn(false);\n    } else {\n      toggleLoadMoreBtn(true);\n    }\n  } catch (error) {\n    showErrorMessage('Failed to fetch images. Please try again later.');\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1;\n  showLoader();\n\n  try {\n    const { images } = await fetchImages(query, page, perPage);\n    renderGallery(images);\n    hideLoader();\n\n    const totalPages = Math.ceil(totalHits / perPage);\n    if (page >= totalPages) {\n      toggleLoadMoreBtn(false);\n      showEndOfCollectionMessage();\n    }\n\n    // Scroll down smoothly after loading more images\n    const firstGalleryItem = document.querySelector('.gallery li');\n    if (firstGalleryItem) {\n      const { height: cardHeight } = firstGalleryItem.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    showErrorMessage('Something went wrong while loading more images.');\n    hideLoader();\n  }\n});\n"],"names":["API_KEY","BASE_URL","axios","fetchImages","query","page","perPage","data","error","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","renderGallery","images","isNewQuery","showErrorMessage","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showLoader","hideLoader","message","iziToast","toggleLoadMoreBtn","show","showEndOfCollectionMessage","form","input","totalHits","event","fetchedTotalHits","totalPages","firstGalleryItem","cardHeight"],"mappings":"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"}